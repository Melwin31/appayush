<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Notifications ‚Äî AyurSutra (Phone Prototype)</title>
<style>
  /* Theme tokens */
  :root{
    --bg-start:#f3fbf9;
    --bg-end:#eefbf6;
    --phone-bg: linear-gradient(180deg,#f7faf8,#fbfffd);
    --card:#ffffff;
    --muted:#6f8a81;
    --primary:#08b77f;
    --accent:#eaf7ef;
    --glass: rgba(255,255,255,0.85);
    --radius:14px;
    --phone-width:360px;
    --shadow: 0 30px 60px rgba(8,24,20,0.14);
    --inner: 0 6px 18px rgba(10,20,16,0.04);
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }

  /* Page background & centering */
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg-start),var(--bg-end));display:flex;align-items:center;justify-content:center;padding:24px;box-sizing:border-box}
  .stage{width:100%;max-width:420px;display:flex;justify-content:center}

  /* Phone frame */
  .phone{
    width:var(--phone-width);
    height:calc(100vh - 48px);
    border-radius:34px;
    background:var(--phone-bg);
    box-shadow:var(--shadow);
    border:1px solid rgba(0,0,0,0.03);
    overflow:hidden;
    display:flex;
    flex-direction:column;
  }

  /* Screen area (scrollable) */
  .screen{
    padding:16px;
    flex:1;
    display:flex;
    flex-direction:column;
    gap:12px;
    overflow-y:auto;
    -webkit-overflow-scrolling:touch;
    background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.6));
  }
  .screen::-webkit-scrollbar{ width:9px }
  .screen::-webkit-scrollbar-thumb{ background: rgba(8,24,20,0.06); border-radius:999px }

  /* Header */
  .top{
    display:flex;
    justify-content:space-between;
    align-items:center;
    gap:12px;
  }
  .top .left{ display:flex; align-items:center; gap:12px; }
  .back{
    width:44px;height:44;border-radius:12px;background:var(--card);display:flex;align-items:center;justify-content:center;
    box-shadow:var(--inner);border:1px solid rgba(0,0,0,0.03);cursor:pointer;font-weight:800;
  }
  .title { font-weight:900; font-size:18px; color:#07221a; }
  .badge {
    background:linear-gradient(180deg,#08b77f,#06c78b); color:#fff; padding:6px 10px; border-radius:999px; font-weight:800; font-size:13px;
    box-shadow:0 8px 18px rgba(8,183,127,0.08);
  }

  /* Filter chips */
  .filters { display:flex; gap:8px; overflow:auto; padding-bottom:6px }
  .chip {
    padding:8px 12px;border-radius:999px;background:var(--card);border:1px solid rgba(0,0,0,0.03);
    box-shadow:var(--inner);font-weight:800;color:var(--muted);cursor:pointer;white-space:nowrap;
  }
  .chip.active{ background: linear-gradient(180deg, rgba(8,183,127,0.12), rgba(8,183,127,0.06)); color:#0f2a26; box-shadow:0 10px 24px rgba(8,183,127,0.06); }

  /* Notifications list */
  .notifications { display:flex; flex-direction:column; gap:12px; margin-top:6px; padding-bottom:12px }
  .note {
    display:flex; gap:12px; align-items:flex-start; padding:12px;
    border-radius:12px; background:var(--card); border:1px solid rgba(0,0,0,0.03);
    box-shadow: 0 8px 20px rgba(10,20,16,0.03);
  }
  .note.unread { box-shadow: 0 10px 30px rgba(8,183,127,0.06); border-color: rgba(8,183,127,0.08); }
  .avatar-note {
    width:56px; height:56; border-radius:12px; background:linear-gradient(180deg,#e9fbf2,#f0fff6);
    display:flex;align-items:center;justify-content:center;font-weight:900;color:var(--primary);
    min-width:56px;
  }
  .note-body { flex:1; min-width:0 }
  .note-title { font-weight:900; font-size:15px; margin:0; color:#07221a; }
  .note-sub { margin-top:6px; color:var(--muted); font-size:13px; line-height:1.3; }
  .note-meta { margin-top:8px; display:flex; gap:10px; align-items:center; font-size:13px; color:var(--muted); flex-wrap:wrap }

  .note-actions { display:flex; gap:8px; flex-direction:column; align-items:flex-end; }
  .btn-small {
    padding:8px 10px;border-radius:10px;border:0;font-weight:800;cursor:pointer;background:linear-gradient(180deg,#f6f8f7,#fff);
    box-shadow:var(--inner); color:var(--muted);
  }
  .btn-primary-small { background: linear-gradient(180deg,var(--primary),#07a86c); color:#fff; box-shadow:0 8px 18px rgba(8,183,127,0.08) }

  /* compact info pill */
  .pill { padding:6px 10px; border-radius:999px; background:#fbfffb; border:1px solid rgba(0,0,0,0.02); font-weight:800; color:var(--muted); font-size:13px; }

  /* empty state */
  .empty {
    padding:24px; text-align:center; color:var(--muted); background:linear-gradient(180deg,#fff,#fbfffb); border-radius:12px; border:1px solid rgba(0,0,0,0.03);
    box-shadow:var(--inner);
  }

  /* footer nav */
  .phone-footer {
    height:84px;
    display:flex;
    align-items:center;
    justify-content:center;
    background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.9));
    border-top: 1px solid rgba(0,0,0,0.02);
    padding:8px 12px;
  }
  .footer-nav { width:100%; max-width:340px; display:flex; justify-content:space-between; align-items:center; }
  .footer-nav a { text-decoration:none; color:var(--muted); display:flex; flex-direction:column; align-items:center; gap:4px; font-size:12px; width:56px; text-align:center; }
  .footer-nav a.active { color:var(--primary); font-weight:800; }

  @media (max-width:380px){ .phone{ width:340px } .avatar-note{width:48px;height:48px;min-width:48px} }
</style>
</head>
<body>
  <div class="stage" role="main" aria-label="Phone prototype - Notifications">
    <div class="phone" role="application" aria-label="Notifications phone">
      <div class="screen" id="screen">

        <!-- header -->
        <div class="top">
          <div class="left">
            <button class="back" id="backBtn" aria-label="Back">‚Üê</button>
            <div>
              <div class="title">Notifications</div>
              <div style="font-size:13px;color:var(--muted)">Manage reminders & feedbacks</div>
            </div>
          </div>
          <div>
            <div class="badge" id="unreadCount">3</div>
          </div>
        </div>

        <!-- filters -->
        <div class="filters" role="toolbar" aria-label="Notification filters" id="filters">
          <div class="chip active" data-filter="all">All</div>
          <div class="chip" data-filter="upcoming">Upcoming</div>
          <div class="chip" data-filter="session">Sessions</div>
          <div class="chip" data-filter="feedback">Feedback</div>
          <div style="margin-left:auto"></div>
        </div>

        <!-- notifications list -->
        <div class="notifications" id="notifications" aria-live="polite">
          <!-- injected by JS -->
        </div>

        <!-- empty helper (hidden when notifications present) -->
        <div class="empty" id="emptyState" style="display:none">
          No notifications ‚Äî you're all caught up ‚úÖ
        </div>

      </div> <!-- screen -->

      <!-- footer nav -->
      <div class="phone-footer" aria-hidden="true">
        <nav class="footer-nav" aria-label="Primary navigation">
          <a href="home.html">üè†<div>Home</div></a>
          <a href="book.html">üìÖ<div>Book</div></a>
          <a href="therapy.html">üìö<div>Therapy</div></a>
          <a href="profile.html">üë§<div>Profile</div></a>
          <a href="history.html">üìú<div>History</div></a>
        </nav>
      </div>
    </div>
  </div>

<script>
  // Sample notifications
  const SAMPLE = [
    {
      id: 'n1',
      type: 'upcoming', // upcoming = pre-session reminder
      title: 'Upcoming: Shirodhara Treatment',
      body: 'Your Shirodhara session with Dr. Rajesh is tomorrow at 10:00 AM. Please arrive 10 minutes early.',
      time: 'Tomorrow ‚Ä¢ 10:00 AM',
      unread: true,
      meta: '60 mins'
    },
    {
      id: 'n2',
      type: 'feedback',
      title: 'Feedback request: Abhyanga Therapy',
      body: 'How was your Abhyanga session with Dr. Priya? Tap to leave a quick feedback.',
      time: 'Jan 15, 2025',
      unread: true,
      meta: 'Feedback'
    },
    {
      id: 'n3',
      type: 'session',
      title: 'Post-session reminder',
      body: 'It‚Äôs time for your post-session questionnaire for the consultation with Dr. Anita.',
      time: 'Jan 10, 2025',
      unread: true,
      meta: '2 days ago'
    },
    {
      id: 'n4',
      type: 'upcoming',
      title: 'Upcoming: Follow-up Panchakarma',
      body: 'Follow-up session scheduled on Jan 25 at 11:30 AM. Confirm or reschedule if needed.',
      time: 'Jan 25, 2025',
      unread: false,
      meta: '75 mins'
    },
    {
      id: 'n5',
      type: 'feedback',
      title: 'Reminder: Share feedback',
      body: 'We would love to hear about your recent consultation ‚Äî 2 quick questions.',
      time: 'Jan 8, 2025',
      unread: false,
      meta: 'Feedback'
    }
  ];

  const listEl = document.getElementById('notifications');
  const unreadBadge = document.getElementById('unreadCount');
  const emptyState = document.getElementById('emptyState');
  const filterChips = document.querySelectorAll('.chip');

  // local state (clone sample)
  let notifications = SAMPLE.map(n => ({...n}));

  function render() {
    listEl.innerHTML = '';
    const activeFilter = document.querySelector('.chip.active').dataset.filter;
    const filtered = notifications.filter(n => {
      if (activeFilter === 'all') return true;
      if (activeFilter === 'session') return n.type === 'session' || n.type === 'upcoming';
      return n.type === activeFilter;
    });

    if (filtered.length === 0) {
      emptyState.style.display = 'block';
    } else {
      emptyState.style.display = 'none';
    }

    filtered.forEach(n => {
      const note = document.createElement('div');
      note.className = 'note' + (n.unread ? ' unread' : '');
      note.setAttribute('data-id', n.id);
      note.innerHTML = `
        <div class="avatar-note" aria-hidden>${n.type === 'feedback' ? '‚úâ' : (n.type === 'upcoming' ? '‚è∞' : '‚úî')}</div>
        <div class="note-body">
          <div class="note-title">${escapeHtml(n.title)}</div>
          <div class="note-sub">${escapeHtml(n.body)}</div>
          <div class="note-meta">
            <div class="pill">${escapeHtml(n.time)}</div>
            <div style="margin-left:auto;color:var(--muted)">${escapeHtml(n.meta)}</div>
          </div>
        </div>
        <div class="note-actions">
          <button class="btn-small mark-btn">${n.unread ? 'Mark read' : 'Unread'}</button>
          <button class="btn-small btn-primary-small open-btn">Open</button>
        </div>
      `;
      // mark read/unread
      note.querySelector('.mark-btn').addEventListener('click', (e) => {
        e.stopPropagation();
        toggleRead(n.id);
      });
      // open action (demo: show modal or navigate)
      note.querySelector('.open-btn').addEventListener('click', (e) => {
        e.stopPropagation();
        openNotification(n.id);
      });
      note.addEventListener('click', () => openNotification(n.id));
      listEl.appendChild(note);
    });

    updateBadge();
  }

  function updateBadge() {
    const unread = notifications.filter(n => n.unread).length;
    unreadBadge.textContent = unread;
    unreadBadge.style.display = unread ? 'inline-block' : 'none';
  }

  function toggleRead(id) {
    notifications = notifications.map(n => n.id === id ? {...n, unread: !n.unread} : n);
    render();
  }

  function openNotification(id) {
    // For prototype: open a simple confirm dialog showing action choices
    const n = notifications.find(x => x.id === id);
    if (!n) return;
    // mark as read
    if (n.unread) {
      notifications = notifications.map(x => x.id === id ? {...x, unread: false} : x);
    }
    render();

    // Demo behaviour by type
    if (n.type === 'feedback') {
      const left = confirm(`${n.title}\n\n${n.body}\n\nWould you like to leave feedback now?`);
      if (left) {
        // navigate to a feedback page (mock)
        location.href = 'feedback.html';
      }
    } else if (n.type === 'upcoming') {
      const ok = confirm(`${n.title}\n\n${n.body}\n\nOpen booking details?`);
      if (ok) location.href = 'book.html';
    } else {
      const ok = confirm(`${n.title}\n\n${n.body}\n\nOpen questionnaire?`);
      if (ok) location.href = 'post-session.html';
    }
  }

  // escape helper
  function escapeHtml(s=''){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c])); }

  // filter handlers
  document.getElementById('filters').addEventListener('click', (e) => {
    const chip = e.target.closest('.chip');
    if (!chip) return;
    document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
    chip.classList.add('active');
    render();
  });

  // back button
  document.getElementById('backBtn').addEventListener('click', () => history.back());

  // initial render
  render();

  // small demo: mark all read after 15s (optional) ‚Äî commented out
  // setTimeout(()=> { notifications = notifications.map(n => ({...n, unread:false})); render(); }, 15000);

</script>
</body>
</html>
